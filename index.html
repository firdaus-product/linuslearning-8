<!DOCTYPE html>
<html lang="ms-MY">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nombor 11–20: Klik & Belajar (Puluh + Sa)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{box-sizing:border-box}
    .activity-card{min-height:400px}
    .flip{transition:transform .3s}
    .flip:hover{transform:scale(1.03)}
    .selected{outline:4px solid #60a5fa; background:#e0f2fe}
    .chip{border-radius:.75rem; padding:.25rem .6rem; font-weight:600; display:inline-flex; align-items:center; gap:.35rem}
    .block10{width:20px;height:20px;border-radius:.35rem;background:#f97316;display:inline-block;margin:2px}
    .block1{width:20px;height:20px;border-radius:.35rem;background:#10b981;display:inline-block;margin:2px}
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
  <div class="container mx-auto p-4 max-w-6xl">
    <!-- Header -->
    <header class="text-center mb-6">
      <h1 class="text-4xl font-bold text-purple-800 mb-2">🔢 Nombor 11–20: Klik & Belajar</h1>
      <p class="text-lg text-gray-600">Belajar sebutan, nilai tempat (*puluh & sa*), dan pecahan puluh+sa — tanpa soalan/markah.</p>
    </header>

    <!-- Info Bar -->
    <div class="bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-6 rounded-lg shadow-md">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <span class="text-2xl mr-3">ℹ️</span>
          <span id="infoText" class="text-xl font-medium text-gray-800">Klik mana-mana elemen untuk belajar.</span>
        </div>
        <button id="speakBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-xl font-bold">
          🔊
        </button>
      </div>
    </div>

    <!-- Activity Card -->
    <div id="activityCard" class="bg-white rounded-xl shadow-lg p-6 mb-6 activity-card">
      <div id="activityContent" class="text-center">
        <div class="text-6xl mb-4">🎯</div>
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Pilih aktiviti untuk mula belajar!</h2>
        <p class="text-lg text-gray-600">Gunakan butang di bawah untuk memilih aktiviti pembelajaran.</p>
      </div>
    </div>

    <!-- Activity Buttons -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-6">
      <button onclick="loadActivity(1)" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg font-bold text-lg">🃏 Kad Perkataan</button>
      <button onclick="loadActivity(2)" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-bold text-lg">📊 Nilai Tempat (Puluh & Sa)</button>
      <button onclick="loadActivity(3)" class="bg-pink-500 hover:bg-pink-600 text-white px-4 py-3 rounded-lg font-bold text-lg">🧩 Pecahan Puluh + Sa</button>
      <button onclick="clearActivity()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-lg font-bold text-lg">🧹 Bersih</button>
      <button onclick="nextActivity()" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-3 rounded-lg font-bold text-lg">➡️ Seterusnya</button>
    </div>
  </div>

  <script>
    // =============== TTS ===============
    let infoText = "Klik mana-mana elemen untuk belajar.";
    let ttsReady=false, currentVoice=null;
    function setInfo(t){ infoText=t; document.getElementById('infoText').textContent=t; }
    function prepareTTS(){
      if(!('speechSynthesis' in window)) return;
      const load=()=>{
        const vs=speechSynthesis.getVoices();
        currentVoice=vs.find(v=>v.lang.includes('ms')||v.lang.includes('MY'))||vs.find(v=>v.lang.startsWith('en'))||vs[0]||null;
      };
      load(); window.speechSynthesis.onvoiceschanged=load;
    }
    function speak(t){
      if(!ttsReady||!('speechSynthesis' in window)||!t) return;
      speechSynthesis.cancel();
      const u=new SpeechSynthesisUtterance(t);
      u.lang='ms-MY'; u.rate=0.85; u.pitch=1.05; if(currentVoice) u.voice=currentVoice;
      speechSynthesis.speak(u);
    }
    document.addEventListener('click',()=>{ if(!ttsReady){ speechSynthesis.speak(new SpeechSynthesisUtterance('')); ttsReady=true; } },{once:true});
    document.getElementById('speakBtn').addEventListener('click',()=>speak(infoText));
    prepareTTS();

    // Sebutan
    const words = {
      11:'sebelas',12:'dua belas',13:'tiga belas',14:'empat belas',15:'lima belas',
      16:'enam belas',17:'tujuh belas',18:'lapan belas',19:'sembilan belas',20:'dua puluh'
    };

    let currentActivity=0;

    // =============== Aktiviti 1: Kad Perkataan ===============
    function activity1(){
      const nums=[11,12,13,14,15,16,17,18,19,20];
      const grid=nums.map(n=>`
        <button class="flip bg-blue-50 border-2 border-blue-200 rounded-xl p-4 text-center"
                onclick="flipCard(this, ${n})">
          <div class="text-4xl font-bold text-blue-800">${n}</div>
          <div class="text-blue-700 mt-1">${words[n]}</div>
          <div class="mt-2 text-sm text-gray-500">Klik untuk dengar / tukar paparan</div>
        </button>
      `).join('');
      document.getElementById('activityContent').innerHTML=`
        <h2 class="text-3xl font-bold text-blue-800 mb-4">🃏 Kad Perkataan Nombor</h2>
        <p class="text-gray-600 mb-4">Klik mana-mana kad untuk dengar sebutan. Kad boleh ditukar antara nombor & perkataan.</p>
        <div class="grid grid-cols-2 md:grid-cols-5 gap-3">${grid}</div>`;
      setInfo('Klik kad untuk dengar sebutan nombor.');
    }
    function flipCard(el, n){
      const showingNumber = el.querySelector('.text-4xl') !== null;
      if(showingNumber){
        el.innerHTML=`<div class="text-3xl font-bold text-blue-800 capitalize">${words[n]}</div>
                      <div class="text-blue-700 mt-1">${n}</div>
                      <div class="mt-2 text-sm text-gray-500">Klik untuk tukar semula</div>`;
        setInfo(`Nombor ${n} dibaca "${words[n]}".`);
        speak(`Nombor ${words[n]}`);
      }else{
        el.innerHTML=`<div class="text-4xl font-bold text-blue-800">${n}</div>
                      <div class="text-blue-700 mt-1">${words[n]}</div>
                      <div class="mt-2 text-sm text-gray-500">Klik untuk dengar / tukar paparan</div>`;
        setInfo(`Ini nombor ${words[n]}.`);
        speak(`Nombor ${words[n]}`);
      }
    }

    // =============== Aktiviti 2: Nilai Tempat (Puluh & Sa) ===============
    function placeInfo(num, index){
      // index 0 = puluh; index 1 = sa
      const s=String(num);
      const d = parseInt(s[index],10);
      const place = index===0 ? 'puluh' : 'sa';
      const placeValue = index===0 ? 10 : 1;
      const value = d * placeValue;
      return {digit:d, place, placeValue, value};
    }
    function activity2(){
      const nums=[14,17,20,11,19];
      const cards=nums.map(n=>{
        const s=String(n);
        return `
          <div class="bg-orange-50 border-2 border-orange-200 rounded-xl p-5">
            <div class="text-center mb-3">
              <div class="text-5xl font-extrabold text-orange-800 tracking-widest">
                <button class="px-2 rounded hover:bg-orange-200" onclick="showPlace(${n},0,this)">${s[0]}</button>
                <button class="px-2 rounded hover:bg-green-200"  onclick="showPlace(${n},1,this)">${s[1]}</button>
              </div>
              <p class="text-sm text-gray-500 mt-1">Klik digit untuk lihat nilainya</p>
            </div>
            <div id="panel-${n}" class="bg-white rounded-lg p-4 border border-orange-200 text-left">
              <p class="text-gray-600 text-sm">Penerangan digit akan dipaparkan di sini.</p>
            </div>
          </div>`;
      }).join('');
      document.getElementById('activityContent').innerHTML=`
        <h2 class="text-3xl font-bold text-orange-800 mb-4">📊 Nilai Tempat Digit (Puluh & Sa)</h2>
        <p class="text-gray-600 mb-4">Klik mana-mana digit pada nombor contoh 11–20 untuk dengar penerangannya.</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">${cards}</div>`;
      setInfo('Klik digit kiri (puluh) atau digit kanan (sa) untuk penerangan nilai.');
    }
    function showPlace(num, index, btn){
      btn.closest('.text-5xl').querySelectorAll('button').forEach(b=>b.classList.remove('selected'));
      btn.classList.add('selected');

      const {digit, place, placeValue, value}=placeInfo(num,index);
      const panel=document.getElementById(`panel-${num}`);
      panel.innerHTML=`
        <div class="space-y-2">
          <div class="chip bg-orange-100 text-orange-800">Nombor: <span class="font-bold">${num}</span></div>
          <div class="chip bg-blue-100 text-blue-800">Digit dipilih: <span class="font-bold">${digit}</span></div>
          <div class="chip bg-purple-100 text-purple-800">Nilai tempat: <span class="font-bold capitalize">${place}</span> (× ${placeValue})</div>
          <div class="chip bg-green-100 text-green-800">Nilai digit: <span class="font-bold">${digit} × ${placeValue} = ${value}</span></div>
        </div>`;
      const ayat = `Dalam nombor ${num}, digit ${digit} berada di tempat ${place}. Nilai digit ialah ${value}.`;
      setInfo(ayat); speak(ayat);
    }

    // =============== Aktiviti 3: Pecahan Puluh + Sa ===============
    function activity3(){
      document.getElementById('activityContent').innerHTML=`
        <h2 class="text-3xl font-bold text-pink-800 mb-3">🧩 Pecahan Puluh + Sa</h2>
        <p class="text-gray-600 mb-4">Pilih nombor 11–20. Lihat pecahannya kepada <b>puluh</b> dan <b>sa</b>. Tekan "Baca Penerangan" untuk audio.</p>
        <div class="max-w-3xl mx-auto bg-pink-50 border border-pink-200 rounded-xl p-5">
          <div class="flex items-center gap-3 mb-3">
            <span>11</span>
            <input id="pickNum" type="range" min="11" max="20" value="11" class="flex-1" oninput="updateDecomp(this.value)">
            <span>20</span>
          </div>
          <div class="flex justify-between text-pink-900 font-semibold mb-2">
            <div>Nilai dipilih: <span id="numLabel">11</span> &nbsp;(<span id="wordLabel">sebelas</span>)</div>
            <div class="space-x-2">
              <button onclick="readDecomp()" class="bg-pink-700 hover:bg-pink-800 text-white px-3 py-1.5 rounded-lg">ℹ️ Baca Penerangan</button>
            </div>
          </div>
          <div id="decompArea" class="bg-white rounded-lg p-4 border border-pink-200"></div>
        </div>`;
      setInfo('Gerakkan slider untuk memilih nombor; pecahan puluh+sa akan dipaparkan.');
      updateDecomp(11);
    }
    function updateDecomp(n){
      n=parseInt(n,10);
      const s=String(n); const puluh=parseInt(s[0],10); const sa=parseInt(s[1],10);
      document.getElementById('numLabel').textContent=n;
      document.getElementById('wordLabel').textContent=words[n];
      const blocks10 = Array.from({length:puluh}).map(()=>'<span class="block10" title="1 puluh (10)"></span>').join('');
      const blocks1  = Array.from({length:sa}).map(()=>'<span class="block1" title="1 sa (1)"></span>').join('');
      document.getElementById('decompArea').innerHTML=`
        <div class="text-lg mb-3"><b>${n}</b> = <b>${puluh}</b> puluh + <b>${sa}</b> sa</div>
        <div class="flex items-start gap-6">
          <div>
            <div class="mb-1 font-semibold">Puluh (10):</div>
            <div>${blocks10 || '<span class="text-gray-400">—</span>'}</div>
          </div>
          <div>
            <div class="mb-1 font-semibold">Sa (1):</div>
            <div>${blocks1 || '<span class="text-gray-400">—</span>'}</div>
          </div>
        </div>`;
      setInfo(`Nombor ${words[n]}.`);
      speak(`Nombor ${words[n]}`);
      window._lastDecompText = `${words[n]} ialah ${puluh} puluh dan ${sa} sa. Nilai ${puluh} puluh ialah ${puluh*10}, dan ${sa} sa ialah ${sa}.`;
    }
    function readDecomp(){
      const t = window._lastDecompText || '';
      setInfo(t); speak(t);
    }

    // Kawalan
    function loadActivity(n){
      currentActivity=n;
      if(n===1) activity1();
      if(n===2) activity2();
      if(n===3) activity3();
    }
    function clearActivity(){
      currentActivity=0;
      document.getElementById('activityContent').innerHTML=`
        <div class="text-center">
          <div class="text-6xl mb-4">🎯</div>
          <h2 class="text-2xl font-bold text-gray-800 mb-2">Pilih aktiviti untuk mula belajar!</h2>
          <p class="text-lg text-gray-600">Gunakan butang di bawah untuk memilih aktiviti pembelajaran.</p>
        </div>`;
      setInfo('Klik mana-mana elemen untuk belajar.');
    }
    function nextActivity(){
      const next = currentActivity>=3 ? 1 : currentActivity+1;
      loadActivity(next);
    }

    document.addEventListener('DOMContentLoaded',()=>setInfo('Selamat datang! Pilih aktiviti untuk mula belajar nombor 11–20.'));
  </script>
</body>
</html>
